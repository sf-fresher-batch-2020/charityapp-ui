<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Request Page</title>
   
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
    crossorigin="anonymous"></script>
   
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
        crossorigin="anonymous"></script>
        <!-- CSS -->
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"       crossorigin="anonymous">

      <!-- jQuery and JS bundle w/ Popper.js -->
      <script src="https://code.jquery.com/jquery-3.5.1.min.js"
          crossorigin="anonymous"></script>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"        
          crossorigin="anonymous"></script>

          <!--link rel="stylesheet" href="style.css"-->
          

    <!--link rel="stylesheet" href="style.css"-->
    <!--script src="addrequest.js"></script-->
    <script src="donatedlist.js"></script>
    
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
</head>

<body>
    <header id="header">

        <!-- Load Header content-->
    </header>
    <main class="container-fluid">
        <form  onsubmit="addlist()" autocomplete="off">
            <h1>Donate a little!</h1><br>
            <p>
                <label><b>Category &nbsp;&nbsp;:</b>&nbsp;&nbsp;</label><span id="category" name="category"></span>
            </label><br>
                   
            </p>
            <label><b>Amount Needed :</b>&nbsp;&nbsp;</label><span id="amt" name="amt"></span>
            </label><br><br>
            
                <label for="Amount"><b>Enter Amount to donate:</b></label><br> 
                <input type="number" id="Amount" name="Amounts" placeholder="Enter Amount" min="1" required> </br><br>
                
           

            <p>
                <input type="submit" value="DONATE" style="font-size:12pt;color:white;
            background-color:green;border:2px solid #336600;padding:3px;[COLOR=" Red"]margin-bottom:30px[/COLOR]"  />
                
                <input type="reset" name="CLEAR" value="Clear" style="font-size:12pt;color:white;
            background-color:red;border:2px solid gray;padding:3px;[COLOR=" Red"]margin-bottom:30px[/COLOR]" />
            </p>
        </form>
    </main>
    <script>
        $("#header").load("_header.html");

         window.addEventListener('load' , () => {
             const params = (new URL(document.location)).searchParams;
             const name=params.get('id');
             const Amt=params.get('Amount');

             document.getElementById('category').innerHTML = name;
             document.getElementById('amt').innerHTML = Amt;
             
         })
         function addlist() {
            event.preventDefault();
         var category = document.getElementById('category').innerHTML;
         var Amount = document.getElementById("Amount").value;
        var transactionid=Math.floor((Math.random() * 1000)+1);
         let obj = { "category" : category , "Amount": Amount , transactionDate:new Date().toJSON().slice(0,10) ,"transactionid" : transactionid};
            console.log(obj);

            var adddetailObj= new AddDetail();
      let result= adddetailObj.addlist(obj);
      if (result=="success"){
       alert("request added");
      }
      else{
          alert("request adding failed");
      }
         }
           </script>

</body>

</html>